server:
  port: 8999

sentinel:
  group-id: SENTINEL_GROUP
  data-type: json

spring:
  application:
    name: strive-gateway
  main:
    allow-bean-definition-overriding: true
  cloud:
    nacos:
      discovery:
        namespace: '@application.namespace@'
        server-addr: '@application.ip@'
      config:
        namespace: '@application.namespace@'
        server-addr: '@application.ip@'
        file-extension: yaml
        group: DEFAULT_GROUP
        extension-configs:
          - data-id: strive-public.yaml
            group: DEFAULT_GROUP
            refresh: true
          - data-id: strive-redis.yaml
            group: DEFAULT_GROUP
            refresh: true

    sentinel:
      transport:
        port: 8720
        # 指定控制台的地址
        dashboard: localhost:9666
      datasource:
        # 网关route纬度限流规则
        gateway-flow:
          nacos:
            server-addr: '@application.ip@'
            namespace: '@application.namespace@'
            data-id: ${spring.application.name}-gateway-flow-rules
            group-id: ${sentinel.group-id}
            data-type: ${sentinel.data-type}
            rule-type: gw_flow
        # 网关api纬度限流规则
        gateway-api:
          nacos:
            server-addr: '@application.ip@'
            namespace: '@application.namespace@'
            data-id: ${spring.application.name}-gateway-api-rules
            group-id: ${sentinel.group-id}
            data-type: ${sentinel.data-type}
            rule-type: gw_api_group
        # 降级规则
        degrade:
          nacos:
            server-addr: '@application.ip@'
            namespace: '@application.namespace@'
            data-id: ${spring.application.name}-degrade-rules
            group-id: ${sentinel.group-id}
            data-type: ${sentinel.data-type}
            rule-type: degrade
        #热点规则
        param:
          nacos:
            server-addr: '@application.ip@'
            namespace: '@application.namespace@'
            data-id: ${spring.application.name}-param-flow-rules
            group-id: ${sentinel.group-id}
            data-type: ${sentinel.data-type}
            rule-type: param_flow
        # 系统规则
        system:
          nacos:
            server-addr: '@application.ip@'
            namespace: '@application.namespace@'
            data-id: ${spring.application.name}-system-rules
            group-id: ${sentinel.group-id}
            data-type: ${sentinel.data-type}
            rule-type: system
      # 取消延迟加载
      eager: true
      # 配置限流之后，响应内容
      scg:
        fallback:
          ## 两种模式，一种是response返回文字提示信息，一种是redirect，重定向跳转，需要同时配置redirect(跳转的uri)
          mode: response
          ## 响应的状态
          response-status: 200
          ## 响应体
          response-body: '{"code": 200,"message": "请求失败，稍后重试！"}'
#          mode: redirect
#          redirect: http://www.baidu.com