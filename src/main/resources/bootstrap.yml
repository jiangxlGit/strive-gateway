server:
  port: 8999

sentinel:
  group-id: SENTINEL_GROUP
  data-type: json

spring:
  application:
    name: strive-gateway
  main:
    allow-bean-definition-overriding: true
  cloud:
    nacos:
      discovery:
        namespace: '@application.namespace@'
        server-addr: '@application.ip@'
      config:
        namespace: '@application.namespace@'
        server-addr: '@application.ip@'
        file-extension: yaml
        group: DEFAULT_GROUP
        extension-configs:
          - data-id: strive-public.yaml
            group: DEFAULT_GROUP
            refresh: true
          - data-id: strive-redis.yaml
            group: DEFAULT_GROUP
            refresh: true

    sentinel:
      transport:
        port: 8720
        dashboard: localhost:9666
      datasource:
        # 网关route纬度限流规则
        gateway-flow:
          nacos:
            server-addr: '@application.ip@'
            namespace: '@application.namespace@'
            data-id: ${spring.application.name}-gateway-flow
            group-id: ${sentinel.group-id}
            data-type: ${sentinel.data-type}
            rule-type: gw_flow
        # 网关api纬度限流规则
        gateway-api:
          nacos:
            server-addr: '@application.ip@'
            namespace: '@application.namespace@'
            data-id: ${spring.application.name}-gateway-api
            group-id: ${sentinel.group-id}
            data-type: ${sentinel.data-type}
            rule-type: gw_api_group
        # 降级规则
        degrade:
          nacos:
            server-addr: '@application.ip@'
            namespace: '@application.namespace@'
            data-id: ${spring.application.name}-degrade-rules
            group-id: ${sentinel.group-id}
            data-type: ${sentinel.data-type}
            rule-type: degrade
        # 系统规则
        system:
          nacos:
            server-addr: '@application.ip@'
            namespace: '@application.namespace@'
            data-id: ${spring.application.name}-system-rules
            group-id: ${sentinel.group-id}
            data-type: ${sentinel.data-type}
            rule-type: system
      # 取消延迟加载
      eager: true
      # 配置限流之后，响应内容
#      scg:
#        fallback:
#          mode: response
#          response-status: 426
#          response-body: 限流了